<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choi Jhyeok | AI Engineer Portfolio</title>
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #ffffff; color: #0d0d0d; }
        
        /* ì»¤ì„œ ê¹œë¹¡ì„ */
        .cursor::after { content: 'â—'; color: #000; animation: blink 1s infinite; margin-left: 2px; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* ì±„íŒ… ë§í’ì„  */
        .user-msg { background-color: #f3f3f3; border-radius: 1.5rem; padding: 10px 20px; display: inline-block; max-width: 80%; margin-left: auto; }

        /* ì¹´ë“œ UI */
        .info-card { border: 1px solid #e5e5e5; border-radius: 0.75rem; transition: all 0.2s ease; background: #fff; }
        .info-card:hover { border-color: #8e8ea0; background-color: #f9f9f9; transform: translateY(-2px); }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        .fade-in { animation: fadeIn 0.6s forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

        /* ìŠ¤í¬ë¡¤ë°” */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #d1d1d1; border-radius: 3px; }

        /* ì„ íƒ ë²„íŠ¼ */
        .choice-btn { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-weight: 500;
        }
        .choice-btn:hover { transform: scale(1.05); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); }

        /* ì…ë ¥ì°½ ì»¨í…Œì´ë„ˆ */
        .input-container {
            position: relative;
            display: flex;
            align-items: center;
            width: 100%;
            height: 48px;
            border-radius: 1.5rem;
            background: #f4f4f4;
            border: 1px solid transparent;
            transition: all 0.2s ease;
        }
        .input-container:focus-within {
            border-color: #d1d1d1;
            background: #fff;
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- 1. Landing View -->
    <div id="landing-view" class="flex-1 flex flex-col items-center justify-center p-4 transition-all duration-500">
        <!-- Spline 3D Animation -->
        <div class="w-48 h-48 md:w-64 md:h-64 mb-4 rounded-full overflow-hidden relative">
            <iframe src='https://my.spline.design/voiceinteractionanimation-DahqAQJQXUxvX6GTwPYAo2nC/' frameborder='0' width='150%' height='150%' style='pointer-events: none; position: absolute; top: -25%; left: -25%;'></iframe>
        </div>
        <h1 class="text-3xl md:text-4xl font-bold mb-8 text-center text-gray-800">
            ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?
        </h1>
        <div class="w-full max-w-2xl relative">
            <div class="input-container">
                <i class="fa-solid fa-magnifying-glass text-gray-400 ml-4 text-lg"></i>
                <input type="text" id="search-input" class="w-full h-full bg-transparent border-none outline-none px-4 text-gray-800 placeholder-gray-400" placeholder="ìµœì¬í˜ ê°œë°œìì— ëŒ€í•´ ì•Œë ¤ì¤˜" autocomplete="off">
                <button id="send-btn" class="mr-3 w-8 h-8 rounded-lg bg-gray-300 text-white flex items-center justify-center hover:bg-black transition-colors">
                    <i class="fa-solid fa-arrow-up"></i>
                </button>
            </div>
        </div>
        <div class="flex flex-wrap gap-2 mt-6 justify-center text-sm text-gray-500">
            <button class="px-4 py-2 bg-gray-50 border border-gray-200 rounded-full hover:bg-gray-100 transition" onclick="startFlow('career')">ğŸ’¼ ì£¼ìš” ê²½ë ¥</button>
            <button class="px-4 py-2 bg-gray-50 border border-gray-200 rounded-full hover:bg-gray-100 transition" onclick="startFlow('project')">ğŸ¤– RAG & LLM í”„ë¡œì íŠ¸</button>
            <button class="px-4 py-2 bg-gray-50 border border-gray-200 rounded-full hover:bg-gray-100 transition" onclick="startFlow('contact')">ğŸ“§ ì—°ë½ì²˜ & Skill</button>
        </div>
    </div>

    <!-- 2. Chat View -->
    <div id="chat-view" class="hidden flex-1 flex flex-col h-full w-full max-w-4xl mx-auto p-4 md:p-6">
        <div class="flex justify-between items-center py-3 border-b border-gray-100 mb-4">
            <div class="font-semibold text-gray-700 flex items-center gap-2">
                <span class="text-gray-400">Model:</span> Choi-Korean-97.1.19
            </div>
            <a href="index.html" class="text-sm text-gray-500 hover:text-black transition"><i class="fa-solid fa-rotate-right"></i> Reset</a>
        </div>
        <div id="chat-container" class="flex-1 overflow-y-auto pb-10 space-y-6 pr-2"></div>
        
        <!-- Chat Input Area -->
        <div id="chat-input-area" class="mt-4 hidden">
            <div class="input-container">
                <i class="fa-solid fa-message text-gray-400 ml-4 text-lg"></i>
                <input type="text" id="chat-input" class="w-full h-full bg-transparent border-none outline-none px-4 text-gray-800 placeholder-gray-400" placeholder="ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”..." autocomplete="off">
                <button id="chat-send-btn" class="mr-3 w-8 h-8 rounded-lg bg-black text-white flex items-center justify-center hover:bg-gray-700 transition-colors">
                    <i class="fa-solid fa-arrow-up"></i>
                </button>
            </div>
        </div>

        <!-- Disabled Input -->
        <div id="disabled-input" class="mt-4 opacity-60 pointer-events-none">
            <div class="w-full h-12 bg-gray-100 rounded-full border border-gray-200 flex items-center px-4 justify-between">
                <span class="text-gray-400 text-sm">AI Engineer Choi Jhyeok Portfolio</span>
                <i class="fa-solid fa-stop text-gray-400"></i>
            </div>
        </div>
    </div>

    <!-- Javascript -->
    <script>
        // --- Data Structure (User Resume) ---
        const resumeData = {
            intro: `**AI Engineer ìµœì¬í˜**ë‹˜ì— ëŒ€í•œ ë¶„ì„ ê²°ê³¼ì…ë‹ˆë‹¤.\n\nìµœì¬í˜ë‹˜ì€ **CV(Computer Vision), LLM, Time-Series** ë“± ë‹¤ì–‘í•œ ë„ë©”ì¸ì„ ì•„ìš°ë¥´ëŠ” AI ê°œë°œìì…ë‹ˆë‹¤. íŠ¹íˆ ìµœê·¼ì—ëŠ” **LLMê³¼ RAG(ê²€ìƒ‰ ì¦ê°• ìƒì„±) ê¸°ìˆ **ì„ í™œìš©í•˜ì—¬ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° ì§‘ì¤‘í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\ní˜„ì¬ **KT**ì—ì„œ AI Engineerë¡œ ì¬ì§ ì¤‘ì´ë©°, ì´ì „ì—ëŠ” **AIFactory**ì™€ **GSITM**ì—ì„œ Data Scientistë¡œ í™œì•½í–ˆìŠµë‹ˆë‹¤.`,
            
            experience: [
                { role: "AI Engineer", company: "KT", period: "2024.07 ~ í˜„ì¬", desc: "LLM ë° AI ì„œë¹„ìŠ¤ ê°œë°œ ë° ìš´ì˜" },
                { role: "Data Scientist", company: "AIFactory", period: "2022.04 ~ 2024.05", desc: "RAG ì‹œìŠ¤í…œ êµ¬ì¶•, Docker ê¸°ë°˜ MLOps íŒŒì´í”„ë¼ì¸ ì„¤ê³„, ê°ì¢… AI ê²½ì§„ëŒ€íšŒ ë¬¸ì œ ì¶œì œ ë° í‰ê°€ ëª¨ë¸ ê°œë°œ" },
                { role: "Data Scientist", company: "GSITM", period: "2021.07 ~ 2022.01", desc: "ìœ ì „ ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ ë¬¼ë¥˜ ìµœì í™”, ì‹œê³„ì—´ íŒë§¤ëŸ‰ ì˜ˆì¸¡ í”„ë¡œì íŠ¸ ìˆ˜í–‰" }
            ],

            education: [
                { degree: "ì •ë³´í†µê³„í•™ê³¼, ì»´í“¨í„°ê³¼í•™ê³¼ í•™ì‚¬", school: "ê²½ìƒëŒ€í•™êµ", period: "2016.03 ~ 2022.02" },
                { degree: "ë¹…ë¦¬ë” ì•„ì¹´ë°ë¯¸ ìˆ˜ë£Œ", school: "2020 ë°ì´í„° ì²­ë…„ ìº í¼ìŠ¤", period: "2020.06 ~ 2020.09" }
            ],

            awards: [
                { title: "ì „ì£¼ì‹œ ë¹…ë°ì´í„° ê³µëª¨ì „ ìµœìš°ìˆ˜ìƒ", org: "ì „ì£¼ì‹œ", period: "2021.04 ~ 2021.05" },
                { title: "ë”ì¡´ë¹„ì¦ˆì˜¨ ì¤‘ì†Œ,ì¤‘ê²¬ ë¹…ë°ì´í„° ì¥ë ¤ìƒ", org: "ë”ì¡´ë¹„ì¦ˆì˜¨", period: "2020.09 ~ 2020.11" },
                { title: "í•™ìˆ  ì°½ì˜ë ¥ ê²½ì§„ëŒ€íšŒ ì€ìƒ", org: "ê²½ìƒëŒ€í•™êµ ìì—°ê³¼í•™ëŒ€í•™", period: "2020.09 ~ 2020.10" },
                { title: "ë¹…ë¦¬ë” ì•„ì¹´ë°ë¯¸ ê²½ë‚¨ë„ì§€ì‚¬ìƒ", org: "2020 ë°ì´í„° ì²­ë…„ ìº í¼ìŠ¤", period: "2020.06 ~ 2020.09" }
            ],

            certificates: [
                { name: "ë°ì´í„°ë¶„ì„ì¤€ì „ë¬¸ê°€(ADsP)", id: "ADsP-0276326" },
                { name: "SQLê°œë°œì(SQLD)", id: "SQLD-041006581" },
                { name: "AICE Associate", id: "AICE_20230408_A00006" }
            ],

            projects: [
                {
                    title: "í•œêµ­ì „ë ¥ê³µì‚¬ ì‚¬ë‚´ ë°ì´í„° RAG êµ¬ì¶•",
                    period: "2024.01 ~ 2024.05",
                    company: "AIFactory",
                    tags: ["LLM", "RAG", "QLora", "Ragas"],
                    desc: "Llama2, Gemma ë“±ì„ QLoraë¡œ Fine-tuningí•˜ê³ , Ragasë¡œ ì„±ëŠ¥ì„ í‰ê°€í•˜ì—¬ ì‚¬ë‚´/ì™¸ ë°ì´í„°ë¥¼ ë‹µë³€í•˜ëŠ” ì±—ë´‡ ì‹œìŠ¤í…œ êµ¬ì¶•."
                },
                {
                    title: "Docker ê¸°ë°˜ ì‹œê³„ì—´ ì˜ˆì¸¡ íŒŒì´í”„ë¼ì¸",
                    period: "2023.10 ~ 2023.12",
                    company: "AIFactory",
                    tags: ["Docker", "Python", "Automation"],
                    desc: "ë°ì´í„° ê°±ì‹ ë¶€í„° ëª¨ë¸ í•™ìŠµ, ì¶”ë¡ ê¹Œì§€ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ì»¨í…Œì´ë„ˆ í™˜ê²½ ì„¤ê³„. Task Schedulerì™€ ì—°ë™í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ íš¨ìœ¨í™”."
                },
                {
                    title: "ë””ë¸Œë¦¿ì§€: ì±„íŒ…í˜• ì„œë²„ ê´€ì œ ì„œë¹„ìŠ¤",
                    period: "2023.07 ~ 2023.10",
                    company: "AIFactory",
                    tags: ["OpenAI API", "Function Call", "VectorDB"],
                    desc: "ìì—°ì–´ ì§ˆì˜ë¥¼ í†µí•´ ì„œë²„ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ì¡°ì¹˜í•˜ëŠ” Function Call ê¸°ë°˜ ì±—ë´‡ ì„œë¹„ìŠ¤. 11ê°œì˜ ê´€ì œ API í˜¸ì¶œ ê°€ëŠ¥."
                },
                {
                    title: "ì–´ì¢… ì‹ë³„ ë° ë¶„ë¥˜ ì•Œê³ ë¦¬ì¦˜ ê°œë°œ",
                    period: "2023.10 ~ 2023.11",
                    company: "AIFactory",
                    tags: ["Object Detection", "YoloV5", "Macro F1"],
                    desc: "8ê°€ì§€ ì–´ì¢…ì— ëŒ€í•œ Object-detection ëŒ€íšŒ ì„¤ê³„ ë° ì¶œì œ. Yolo V5ë¥¼ í†µí•œ ì–´ì¢… ì‹ë³„ ëª¨ë¸ ê°œë°œ."
                },
                {
                    title: "KT í†µì‹ ë§ ì•ˆì •ì„± í™•ë³´ AI í•´ì»¤í†¤",
                    period: "2023.07 ~ 2023.09",
                    company: "AIFactory",
                    tags: ["Time-Series", "Classification", "MAE"],
                    desc: "ë¬´ì„  ê¸°ì§€êµ­ ì¥ë¹„ í†µê³„ ë°ì´í„°ë¥¼ í™œìš©í•œ ì¸êµ¬ ë°€ì§‘ë„ ì˜ˆì¸¡ ë° ê²½ë³´ ìœ í˜• ë¶„ë¥˜ ëŒ€íšŒ ì„¤ê³„."
                },
                {
                    title: "NHíˆ¬ìì¦ê¶Œ ë¹…ë°ì´í„° ê²½ì§„ëŒ€íšŒ",
                    period: "2022.09 ~ 2022.12",
                    company: "AIFactory",
                    tags: ["Clustering", "K-means", "Data Analysis"],
                    desc: "NH ê³ ê° ê±°ë˜ ë°ì´í„°ë¥¼ í†µí•œ ê³ ê°êµ° ë¶„ë¥˜ ë° ìì‚° ë³€ë™ë¥  ë¶„ì„. êµ°ì§‘ë³„ íŠ¹ì„±ê³¼ ë‚˜ì´ ê¸°ë°˜ ë³´ê³ ì„œ ì‘ì„±."
                },
                {
                    title: "DL E&C ì•ˆì „ì¥êµ¬ ì°©ìš© íƒì§€",
                    period: "2022.09 ~ 2022.11",
                    company: "AIFactory",
                    tags: ["Object Detection", "COCO", "Macro F1"],
                    desc: "Object Detectionì„ í™œìš©í•œ 10ê°œì˜ ì•ˆì „ì¥ë¹„ ì°©ìš© ì—¬ë¶€ íƒì§€ ëŒ€íšŒ ì„¤ê³„."
                },
                {
                    title: "LG ì…ì í˜•íƒœ ë¶„ì„ í•´ì»¤í†¤",
                    period: "2022.07 ~ 2022.08",
                    company: "AIFactory",
                    tags: ["Instance Segmentation", "Mask R-CNN"],
                    desc: "Mask R-CNNì„ í†µí•œ ìœ ì²´ìƒ ì…ì ê²€ì¶œ ëŒ€íšŒ ì„¤ê³„. IoU ë°˜ì˜ F1-Score í‰ê°€."
                },
                {
                    title: "ìœ ì „ì•Œê³ ë¦¬ì¦˜ ë¬¼ë¥˜ë§¤ì¹­",
                    period: "2021.10 ~ 2021.12",
                    company: "GSITM",
                    tags: ["Genetic Algorithm", "DEAP", "Optimization"],
                    desc: "DEAP ìœ ì „ ì•Œê³ ë¦¬ì¦˜ì„ í™œìš©í•˜ì—¬ ìµœëŒ€ ì ì¬ëŸ‰ ë‚´ ìµœëŒ€ ì´ìµë¥  ìƒí’ˆ ì¡°í•© ì¶”ì²œ í”„ë¡œì„¸ìŠ¤ ê°œë°œ."
                },
                {
                    title: "í¸ì˜ì  íŒë§¤ëŸ‰ ì˜ˆì¸¡ í”„ë¡œì íŠ¸",
                    period: "2021.09 ~ 2022.09",
                    company: "GSITM",
                    tags: ["Time-Series", "Prophet", "Forecasting"],
                    desc: "Metaì˜ Prophetì„ ì‚¬ìš©í•˜ì—¬ ìƒí’ˆë³„ íŒë§¤ëŸ‰ ì˜ˆì¸¡. í¸ì˜ì ë³„ ì¬ê³  ê´€ë¦¬ íš¨ìœ¨í™” ë°©ì•ˆ ì œì‹œ."
                }
            ],

            personalProjects: [
                {
                    title: "Gemma ë¹„ì„œ (Personal)",
                    tags: ["Gemma-7b", "SFT", "KakaoTalk"],
                    desc: "Gemma-7b ëª¨ë¸ì„ SFT í•™ìŠµì‹œì¼œ 'ì‹œì²­ ê°€ëŠ” ë²•', 'ì£¼ê°€ ì¡°íšŒ' ë“± í•¨ìˆ˜ í˜¸ì¶œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê³  ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì „ì†¡í•˜ëŠ” ê°œì¸ ë¹„ì„œ."
                },
                {
                    title: "LangChain ì›¹ ì„œë¹„ìŠ¤ (Personal)",
                    tags: ["Streamlit", "LangChain", "Web"],
                    desc: "LangChain KR ë°‹ì—… ë°œí‘œ ì£¼ì œ. Streamlitì„ í™œìš©í•˜ì—¬ ë‚˜ë§Œì˜ RAG ê¸°ë°˜ ì¥ì†Œ ì¶”ì²œ ë° ë³´ê³ ì„œ ìë™ ìƒì„± ì›¹ ì„œë¹„ìŠ¤ ë°°í¬."
                },
                {
                    title: "Llama2 Fine-tune & RAG",
                    tags: ["Llama2", "SFTTrainer", "LoRA"],
                    desc: "llama2 fine-tuningì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•œ ë°©ë²• ì„¤ê³„ ë° RAG í”„ë¡œì„¸ìŠ¤ ì„¤ê³„ ë°©ë²• ë°œí‘œ. YouTube ë°œí‘œ ì˜ìƒ ê³µê°œ."
                },
                {
                    title: "ì±—GPT ì ë©”ì¶” ë©”ë‰´íŒ",
                    tags: ["ChatGPT", "LangChain", "RAG"],
                    desc: "ChatGPTì™€ Langchainì„ ì‚¬ìš©í•´ì„œ PDF ê¸°ë°˜ RAG ì±—ë´‡ ì‹œìŠ¤í…œ êµ¬ì¶•. YouTube ë°œí‘œ ì˜ìƒ ê³µê°œ."
                },
                {
                    title: "MMPose Human Pose Estimation",
                    tags: ["MMPose", "HRNet", "Gradio"],
                    desc: "MMPoseë¥¼ ì‚¬ìš©í•˜ì—¬ MPII ë°ì´í„°ì…‹ìœ¼ë¡œ ì‚¬ëŒì˜ key-pointë¥¼ ì¶”ë¡ í•˜ëŠ” ê³¼ì • ì„¤ëª…. YouTube ë°œí‘œ."
                }
            ],

            skills: ["Python", "PyTorch", "TensorFlow", "LangChain", "RAG", "LLM Fine-tuning", "Docker", "MySQL", "GCP"],
            
            contact: {
                email: "wowogur12@naver.com",
                phone: "+82 010-4479-6775",
                blog: "cjhyeok.tistory.com",
                github: "github.com/choijhyeok"
            }
        };

        // --- State Management ---
        let currentFlow = null;
        let currentStep = 0;
        let waitingForInput = false;
        let pendingAction = null;

        // --- DOM Elements ---
        const searchInput = document.getElementById('search-input');
        const landingView = document.getElementById('landing-view');
        const chatView = document.getElementById('chat-view');
        const chatContainer = document.getElementById('chat-container');
        const chatInputArea = document.getElementById('chat-input-area');
        const chatInput = document.getElementById('chat-input');
        const disabledInput = document.getElementById('disabled-input');

        // --- Fixed Query ---
        const fixedQuery = 'ìµœì¬í˜ ê°œë°œìì— ëŒ€í•´ ì•Œë ¤ì¤˜';
        let inputIndex = 0;

        // --- Event Listeners ---
        searchInput.addEventListener('input', (e) => {
            // í•œ ê¸€ì ì…ë ¥í•  ë•Œë§ˆë‹¤ fixedQueryì˜ ë‹¤ìŒ ê¸€ìë¡œ ëŒ€ì²´
            if (inputIndex < fixedQuery.length) {
                inputIndex++;
                searchInput.value = fixedQuery.substring(0, inputIndex);
            } else {
                searchInput.value = fixedQuery;
            }
        });

        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && inputIndex > 0) startFlow('full');
        });
        document.getElementById('send-btn').addEventListener('click', () => {
            if (inputIndex > 0) startFlow('full');
        });

        // --- Chat Input Fixed Query ---
        const fixedChatQuery = 'ë„¤ í™•ì¸í•´ ì£¼ì„¸ìš”';
        let chatInputIndex = 0;

        chatInput.addEventListener('input', (e) => {
            // í•œ ê¸€ì ì…ë ¥í•  ë•Œë§ˆë‹¤ fixedChatQueryì˜ ë‹¤ìŒ ê¸€ìë¡œ ëŒ€ì²´
            if (chatInputIndex < fixedChatQuery.length) {
                chatInputIndex++;
                chatInput.value = fixedChatQuery.substring(0, chatInputIndex);
            } else {
                chatInput.value = fixedChatQuery;
            }
        });

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && chatInputIndex > 0) handleUserInput();
        });
        document.getElementById('chat-send-btn').addEventListener('click', () => {
            if (chatInputIndex > 0) handleUserInput();
        });

        // --- Flow Control ---
        function startFlow(flowType) {
            currentFlow = flowType;
            currentStep = 0;
            
            landingView.classList.add('hidden');
            chatView.classList.remove('hidden');
            
            // User message (always show the same)
            const userQuery = getFlowQuery(flowType);
            addUserMessage(userQuery);
            
            setTimeout(() => processFlow(), 600);
        }

        function getFlowQuery(flowType) {
            switch(flowType) {
                case 'career': return 'ìµœì¬í˜ì˜ ì£¼ìš” ê²½ë ¥ì„ ìš”ì•½í•´ì¤˜';
                case 'project': return 'RAG ë° LLM í”„ë¡œì íŠ¸ ë³´ì—¬ì¤˜';
                case 'contact': return 'ì—°ë½ì²˜ì™€ ê¸°ìˆ  ìŠ¤íƒ ì•Œë ¤ì¤˜';
                default: return 'ìµœì¬í˜ ê°œë°œìì— ëŒ€í•´ ì•Œë ¤ì¤˜';
            }
        }

        async function processFlow() {
            switch(currentFlow) {
                case 'career':
                    await careerFlow();
                    break;
                case 'project':
                    await projectFlow();
                    break;
                case 'contact':
                    await contactFlow();
                    break;
                case 'full':
                default:
                    await fullFlow();
                    break;
            }
        }

        // --- Career Flow ---
        async function careerFlow() {
            const contentArea = createAIWrapper();
            
            // Step 1: Career intro
            await typeText(contentArea, `**ìµœì¬í˜ë‹˜ì˜ ì£¼ìš” ê²½ë ¥**ì„ ì •ë¦¬í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\ní˜„ì¬ **KT**ì—ì„œ AI Engineerë¡œ ì¬ì§ ì¤‘ì´ë©°, ì´ **3ê°œ íšŒì‚¬**ì—ì„œ AI/Data Science ê´€ë ¨ ê²½ë ¥ì„ ìŒ“ì•˜ìŠµë‹ˆë‹¤.`);
            
            // Step 2: Experience cards
            const expContainer = document.createElement('div');
            expContainer.className = 'grid gap-3 mt-2 fade-in';
            resumeData.experience.forEach(exp => {
                const item = document.createElement('div');
                item.className = 'flex flex-col md:flex-row md:items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100';
                item.innerHTML = `
                    <div>
                        <span class="font-bold text-gray-900 text-lg">${exp.company}</span>
                        <span class="text-sm text-gray-600 ml-2">${exp.role}</span>
                        <p class="text-xs text-gray-500 mt-1">${exp.desc}</p>
                    </div>
                    <div class="text-sm text-blue-600 font-medium mt-2 md:mt-0 whitespace-nowrap">${exp.period}</div>
                `;
                expContainer.appendChild(item);
            });
            contentArea.appendChild(expContainer);
            await wait(500);

            // Step 3: Career Summary
            await typeText(contentArea, `\n\n**ìµœì¬í˜ | AI Engineer ì£¼ìš” ê²½ë ¥ ìš”ì•½**\n\nìµœì¬í˜ì€ LLMÂ·RAGÂ·ì‹œê³„ì—´ ì „ë°˜ì„ ì•„ìš°ë¥´ëŠ” ì‹¤ë¬´ ì¤‘ì‹¬ì˜ AI Engineerë¡œ,\n\nëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ë¶€í„° ëª¨ë¸ í•™ìŠµÂ·í‰ê°€Â·ì„œë¹„ìŠ¤í™”ê¹Œì§€ ì „ ê³¼ì •ì„ ì§ì ‘ ì„¤ê³„Â·êµ¬í˜„í•´ ì˜¨ ê²½í—˜ì„ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤.`);
            await wait(800);

            // Step 4: Ask about projects
            await askQuestion(contentArea, '\ní”„ë¡œì íŠ¸ë„ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?', 'showProjects');
        }

        // --- Project Flow ---
        async function projectFlow() {
            const contentArea = createAIWrapper();
            
            await typeText(contentArea, `**RAG ë° LLM ê´€ë ¨ í”„ë¡œì íŠ¸**ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì •ë¦¬í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\nìµœì¬í˜ë‹˜ì€ ë‹¤ì–‘í•œ AI í”„ë¡œì íŠ¸ë¥¼ ìˆ˜í–‰í–ˆìœ¼ë©°, íŠ¹íˆ **LLM Fine-tuning, RAG ì‹œìŠ¤í…œ êµ¬ì¶•, Function Call** ë“±ì˜ ë¶„ì•¼ì—ì„œ ì „ë¬¸ì„±ì„ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤.`);
            
            await showProjects(contentArea);
            
            await askQuestion(contentArea, 'ê°œì¸ í”„ë¡œì íŠ¸ë„ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?', 'showPersonalProjects');
        }

        // --- Contact Flow ---
        async function contactFlow() {
            const contentArea = createAIWrapper();
            
            await typeText(contentArea, `**ìµœì¬í˜ë‹˜ì˜ ì—°ë½ì²˜ ë° ê¸°ìˆ  ìŠ¤íƒ**ì…ë‹ˆë‹¤.`);
            
            // Contact info
            const contactDiv = document.createElement('div');
            contactDiv.className = 'bg-gray-900 text-white p-4 rounded-xl mt-3 fade-in shadow-md';
            contactDiv.innerHTML = `
                <h3 class="font-bold text-lg mb-3 text-blue-300"><i class="fa-solid fa-address-card mr-2"></i>ì—°ë½ì²˜</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <div class="flex items-center gap-3"><i class="fa-solid fa-envelope text-gray-400"></i> <a href="mailto:${resumeData.contact.email}" class="hover:text-blue-300 transition">${resumeData.contact.email}</a></div>
                    <div class="flex items-center gap-3"><i class="fa-solid fa-phone text-gray-400"></i> ${resumeData.contact.phone}</div>
                    <div class="flex items-center gap-3"><i class="fa-brands fa-github text-gray-400"></i> <a href="https://${resumeData.contact.github}" target="_blank" class="hover:text-blue-300 transition">GitHub</a></div>
                    <div class="flex items-center gap-3"><i class="fa-solid fa-blog text-gray-400"></i> <a href="https://${resumeData.contact.blog}" target="_blank" class="hover:text-blue-300 transition">Tistory Blog</a></div>
                </div>
            `;
            contentArea.appendChild(contactDiv);
            await wait(300);

            // Skills
            const skillsDiv = document.createElement('div');
            skillsDiv.className = 'mt-4 fade-in';
            skillsDiv.innerHTML = `
                <h3 class="font-bold text-lg mb-3 text-gray-800"><i class="fa-solid fa-code mr-2"></i>ê¸°ìˆ  ìŠ¤íƒ</h3>
                <div class="flex flex-wrap gap-2">
                    ${resumeData.skills.map(s => `<span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">${s}</span>`).join('')}
                </div>
            `;
            contentArea.appendChild(skillsDiv);
            await wait(300);

            // Certificates
            const certDiv = document.createElement('div');
            certDiv.className = 'mt-4 fade-in';
            certDiv.innerHTML = `
                <h3 class="font-bold text-lg mb-3 text-gray-800"><i class="fa-solid fa-certificate mr-2"></i>ìê²©ì¦</h3>
                <div class="grid gap-2">
                    ${resumeData.certificates.map(c => `
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-gray-100">
                            <span class="font-medium text-gray-800">${c.name}</span>
                            <span class="text-xs text-gray-400">${c.id}</span>
                        </div>
                    `).join('')}
                </div>
            `;
            contentArea.appendChild(certDiv);
            await wait(300);

            // Awards
            const awardsDiv = document.createElement('div');
            awardsDiv.className = 'mt-4 fade-in';
            awardsDiv.innerHTML = `
                <h3 class="font-bold text-lg mb-3 text-gray-800"><i class="fa-solid fa-trophy mr-2"></i>ìˆ˜ìƒ ê²½ë ¥</h3>
                <div class="grid gap-2">
                    ${resumeData.awards.map(a => `
                        <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg border border-yellow-100">
                            <div>
                                <span class="font-medium text-gray-800">${a.title}</span>
                                <span class="text-xs text-gray-500 ml-2">${a.org}</span>
                            </div>
                            <span class="text-xs text-gray-400">${a.period}</span>
                        </div>
                    `).join('')}
                </div>
            `;
            contentArea.appendChild(awardsDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            await wait(500);

            await askQuestion(contentArea, 'ì£¼ìš” ê²½ë ¥ë„ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?', 'showCareer');
        }

        // --- fullFlow í•¨ìˆ˜ êµì²´ ---
        async function fullFlow() {
            const contentArea = createAIWrapper();
            
            // 1. ì¸ì‚¬ë§
            await typeText(contentArea, resumeData.intro);
            
            // 2. ê²½ë ¥ ì¹´ë“œ
            const expContainer = document.createElement('div');
            expContainer.className = 'grid gap-3 mt-3 mb-3 fade-in';
            resumeData.experience.forEach(exp => {
                const item = document.createElement('div');
                item.className = 'flex flex-col md:flex-row md:items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100';
                item.innerHTML = `
                    <div>
                        <span class="font-bold text-gray-900">${exp.company}</span>
                        <span class="text-sm text-gray-600"> | ${exp.role}</span>
                    </div>
                    <div class="text-xs text-gray-400 mt-1 md:mt-0">${exp.period}</div>
                `;
                expContainer.appendChild(item);
            });
            contentArea.appendChild(expContainer);
            await wait(600);

            // 3. ê²½ë ¥ ìš”ì•½ (ì´ì œ ì•ˆ ì”¹íˆê³  ì˜ ë‚˜ì˜¬ ê²ë‹ˆë‹¤)
            const summaryText = "**ìµœì¬í˜ | AI Engineer ì£¼ìš” ê²½ë ¥ ìš”ì•½**\n\nìµœì¬í˜ì€ LLMÂ·RAGÂ·ì‹œê³„ì—´ ì „ë°˜ì„ ì•„ìš°ë¥´ëŠ” ì‹¤ë¬´ ì¤‘ì‹¬ì˜ AI Engineerë¡œ, ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ë¶€í„° ëª¨ë¸ í•™ìŠµÂ·í‰ê°€Â·ì„œë¹„ìŠ¤í™”ê¹Œì§€ ì „ ê³¼ì •ì„ ì§ì ‘ ì„¤ê³„Â·êµ¬í˜„í•´ ì˜¨ ê²½í—˜ì„ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤.";
            await typeText(contentArea, summaryText);
            
            await wait(800);

            // 4. ì§ˆë¬¸
            await askQuestion(contentArea, 'í”„ë¡œì íŠ¸ë„ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?', 'showProjects');
        }

        // --- Ask Question with Input ---
        async function askQuestion(contentArea, question, actionOnYes) {
            await typeText(contentArea, `\n${question}`);
            
            pendingAction = actionOnYes;
            waitingForInput = true;
            
            // Reset chat input index for new question
            chatInputIndex = 0;
            chatInput.value = '';
            
            // Show input area
            disabledInput.classList.add('hidden');
            chatInputArea.classList.remove('hidden');
            chatInput.placeholder = 'ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”...';
            chatInput.focus();
        }

        // --- Handle User Input ---
        async function handleUserInput() {
            const userInput = chatInput.value.trim();
            chatInput.value = '';
            chatInputIndex = 0;
            
            // Always show "ë„¤ í™•ì¸í•´ ì£¼ì„¸ìš”" as user message
            addUserMessage('ë„¤ í™•ì¸í•´ ì£¼ì„¸ìš”');
            
            waitingForInput = false;
            chatInputArea.classList.add('hidden');
            disabledInput.classList.remove('hidden');
            
            setTimeout(() => executeAction(pendingAction), 600);
        }

        async function executeAction(action) {
            const contentArea = createAIWrapper();
            
            switch(action) {
                case 'showProjects':
                    await typeText(contentArea, `**ì£¼ìš” í”„ë¡œì íŠ¸ ëª©ë¡**ì…ë‹ˆë‹¤.`);
                    await showProjects(contentArea);
                    await typeText(contentArea, `\n**í”„ë¡œì íŠ¸ ê¸°ë°˜ í•µì‹¬ ì—­ëŸ‰**\n\n1. **LLM & RAG ì „ë¬¸ì„±**: QLora Fine-tuning, Ragas í‰ê°€, VectorDB êµ¬ì¶• ë“± LLM ì „ ì£¼ê¸° ê²½í—˜\n\n2. **MLOps ì„¤ê³„ ëŠ¥ë ¥**: Docker ê¸°ë°˜ ìë™í™” íŒŒì´í”„ë¼ì¸, Task Scheduler ì—°ë™ìœ¼ë¡œ ì‹¤ë¬´ ë°°í¬ ê²½í—˜\n\n3. **CV & ì‹œê³„ì—´ ë‹¤ì–‘ì„±**: Object Detection, Instance Segmentation, Prophet ë“± ë‹¤ì–‘í•œ ë„ë©”ì¸ ê²½í—˜\n\n4. **ëŒ€íšŒ ì„¤ê³„ & í‰ê°€ ëŠ¥ë ¥**: 10ê°œ ì´ìƒì˜ AI ê²½ì§„ëŒ€íšŒ ë¬¸ì œ ì¶œì œ ë° í‰ê°€ ì‹œìŠ¤í…œ ì„¤ê³„`);
                    await wait(800);
                    await askQuestion(contentArea, '\nê°œì¸ í”„ë¡œì íŠ¸ë„ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?', 'showPersonalProjects');
                    break;
                    
                case 'showPersonalProjects':
                    await typeText(contentArea, `**ê°œì¸ í”„ë¡œì íŠ¸ ë° ë°œí‘œ í™œë™**ì…ë‹ˆë‹¤.`);
                    await showPersonalProjects(contentArea);
                    await typeText(contentArea, `\n**ê°œì¸ í”„ë¡œì íŠ¸ ê¸°ë°˜ ì°¨ë³„í™” í¬ì¸íŠ¸**\n\n1. **ê¸°ìˆ  ê³µìœ  & ì»¤ë®¤ë‹ˆí‹° ê¸°ì—¬**: LangChain KR ë°‹ì—… ë°œí‘œ, YouTube íŠœí† ë¦¬ì–¼ ì œì‘ ë“± ì ê·¹ì ì¸ ì§€ì‹ ê³µìœ \n\n2. **ì‹¤ìƒí™œ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥**: Gemma ë¹„ì„œ(ì¹´ì¹´ì˜¤í†¡ ì—°ë™), ì ë©”ì¶” ì±—ë´‡ ë“± ì‹¤ìš©ì ì¸ AI ì„œë¹„ìŠ¤ ê°œë°œ\n\n3. **ìê¸°ì£¼ë„ í•™ìŠµ**: ì—…ë¬´ ì™¸ ì‹œê°„ì—ë„ ì§€ì†ì ìœ¼ë¡œ ì‹ ê¸°ìˆ  í•™ìŠµ ë° í”„ë¡œì íŠ¸í™”\n\n4. **End-to-End êµ¬í˜„ ëŠ¥ë ¥**: ëª¨ë¸ í•™ìŠµë¶€í„° Gradio/Streamlit ë°°í¬ê¹Œì§€ ì „ ê³¼ì • ë…ë¦½ ìˆ˜í–‰`);
                    await wait(800);
                    await askQuestion(contentArea, '\nì—°ë½ì²˜ì™€ ê¸°ìˆ  ìŠ¤íƒë„ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?', 'showContact');
                    break;
                    
                case 'showContact':
                    await showContactInfo(contentArea);
                    await typeText(contentArea, `\në” ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ìƒë‹¨ì˜ **Reset** ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ì‹œ ì‹œì‘í•´ì£¼ì„¸ìš”! ğŸ˜Š`);
                    break;
                    
                case 'showCareer':
                    await typeText(contentArea, `**ì£¼ìš” ê²½ë ¥**ì…ë‹ˆë‹¤.`);
                    const expContainer = document.createElement('div');
                    expContainer.className = 'grid gap-3 mt-2 fade-in';
                    resumeData.experience.forEach(exp => {
                        const item = document.createElement('div');
                        item.className = 'flex flex-col md:flex-row md:items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100';
                        item.innerHTML = `
                            <div>
                                <span class="font-bold text-gray-900 text-lg">${exp.company}</span>
                                <span class="text-sm text-gray-600 ml-2">${exp.role}</span>
                                <p class="text-xs text-gray-500 mt-1">${exp.desc}</p>
                            </div>
                            <div class="text-sm text-blue-600 font-medium mt-2 md:mt-0 whitespace-nowrap">${exp.period}</div>
                        `;
                        expContainer.appendChild(item);
                    });
                    contentArea.appendChild(expContainer);
                    await wait(500);
                    await askQuestion(contentArea, 'í”„ë¡œì íŠ¸ë„ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?', 'showProjects');
                    break;
            }
        }

        // --- Show Projects ---
        async function showProjects(contentArea) {
            const projGrid = document.createElement('div');
            projGrid.className = 'grid grid-cols-1 md:grid-cols-2 gap-3 mt-2 fade-in';
            
            resumeData.projects.forEach((proj, idx) => {
                setTimeout(() => {
                    const card = document.createElement('div');
                    card.className = 'info-card p-4';
                    const tagsHtml = proj.tags.map(t => `<span class="text-[10px] bg-blue-50 text-blue-600 px-2 py-1 rounded-md font-medium mr-1">${t}</span>`).join('');
                    
                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-gray-800 text-sm">${proj.title}</h3>
                            <span class="text-[10px] text-gray-400 whitespace-nowrap ml-2">${proj.period}</span>
                        </div>
                        <p class="text-xs text-gray-500 mb-3 leading-relaxed">${proj.desc}</p>
                        <div class="flex flex-wrap gap-1">${tagsHtml}</div>
                    `;
                    projGrid.appendChild(card);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, idx * 150);
            });
            contentArea.appendChild(projGrid);
            await wait(resumeData.projects.length * 150 + 500);
        }

        // --- Show Personal Projects ---
        async function showPersonalProjects(contentArea) {
            const projGrid = document.createElement('div');
            projGrid.className = 'grid grid-cols-1 md:grid-cols-2 gap-3 mt-2 fade-in';
            
            resumeData.personalProjects.forEach((proj, idx) => {
                setTimeout(() => {
                    const card = document.createElement('div');
                    card.className = 'info-card p-4';
                    const tagsHtml = proj.tags.map(t => `<span class="text-[10px] bg-purple-50 text-purple-600 px-2 py-1 rounded-md font-medium mr-1">${t}</span>`).join('');
                    
                    card.innerHTML = `
                        <h3 class="font-bold text-gray-800 text-sm mb-2">${proj.title}</h3>
                        <p class="text-xs text-gray-500 mb-3 leading-relaxed">${proj.desc}</p>
                        <div class="flex flex-wrap gap-1">${tagsHtml}</div>
                    `;
                    projGrid.appendChild(card);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, idx * 150);
            });
            contentArea.appendChild(projGrid);
            await wait(resumeData.personalProjects.length * 150 + 500);
        }

        // --- Show Contact Info ---
        async function showContactInfo(contentArea) {
            await typeText(contentArea, `**ìµœì¬í˜ë‹˜ì˜ ì—°ë½ì²˜ ë° ê¸°ìˆ  ìŠ¤íƒ**ì…ë‹ˆë‹¤.`);
            
            // Contact info
            const contactDiv = document.createElement('div');
            contactDiv.className = 'bg-gray-900 text-white p-4 rounded-xl mt-3 fade-in shadow-md';
            contactDiv.innerHTML = `
                <h3 class="font-bold text-lg mb-3 text-blue-300"><i class="fa-solid fa-address-card mr-2"></i>ì—°ë½ì²˜</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <div class="flex items-center gap-3"><i class="fa-solid fa-envelope text-gray-400"></i> <a href="mailto:${resumeData.contact.email}" class="hover:text-blue-300 transition">${resumeData.contact.email}</a></div>
                    <div class="flex items-center gap-3"><i class="fa-solid fa-phone text-gray-400"></i> ${resumeData.contact.phone}</div>
                    <div class="flex items-center gap-3"><i class="fa-brands fa-github text-gray-400"></i> <a href="https://${resumeData.contact.github}" target="_blank" class="hover:text-blue-300 transition">GitHub</a></div>
                    <div class="flex items-center gap-3"><i class="fa-solid fa-blog text-gray-400"></i> <a href="https://${resumeData.contact.blog}" target="_blank" class="hover:text-blue-300 transition">Tistory Blog</a></div>
                </div>
            `;
            contentArea.appendChild(contactDiv);
            await wait(300);

            // Skills
            const skillsDiv = document.createElement('div');
            skillsDiv.className = 'mt-4 fade-in';
            skillsDiv.innerHTML = `
                <h3 class="font-bold text-lg mb-3 text-gray-800"><i class="fa-solid fa-code mr-2"></i>ê¸°ìˆ  ìŠ¤íƒ</h3>
                <div class="flex flex-wrap gap-2">
                    ${resumeData.skills.map(s => `<span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">${s}</span>`).join('')}
                </div>
            `;
            contentArea.appendChild(skillsDiv);
            await wait(300);

            // Certificates
            const certDiv = document.createElement('div');
            certDiv.className = 'mt-4 fade-in';
            certDiv.innerHTML = `
                <h3 class="font-bold text-lg mb-3 text-gray-800"><i class="fa-solid fa-certificate mr-2"></i>ìê²©ì¦</h3>
                <div class="grid gap-2">
                    ${resumeData.certificates.map(c => `
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-gray-100">
                            <span class="font-medium text-gray-800">${c.name}</span>
                            <span class="text-xs text-gray-400">${c.id}</span>
                        </div>
                    `).join('')}
                </div>
            `;
            contentArea.appendChild(certDiv);
            await wait(300);

            // Awards
            const awardsDiv = document.createElement('div');
            awardsDiv.className = 'mt-4 fade-in';
            awardsDiv.innerHTML = `
                <h3 class="font-bold text-lg mb-3 text-gray-800"><i class="fa-solid fa-trophy mr-2"></i>ìˆ˜ìƒ ê²½ë ¥</h3>
                <div class="grid gap-2">
                    ${resumeData.awards.map(a => `
                        <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg border border-yellow-100">
                            <div>
                                <span class="font-medium text-gray-800">${a.title}</span>
                                <span class="text-xs text-gray-500 ml-2">${a.org}</span>
                            </div>
                            <span class="text-xs text-gray-400">${a.period}</span>
                        </div>
                    `).join('')}
                </div>
            `;
            contentArea.appendChild(awardsDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            await wait(300);
        }

        // --- Helper Functions ---
        function createAIWrapper() {
            const aiWrapper = document.createElement('div');
            aiWrapper.className = 'flex gap-4 fade-in mt-4 items-start max-w-full';
            aiWrapper.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-[#10a37f] flex-shrink-0 flex items-center justify-center text-white text-sm shadow-sm">
                    <i class="fa-solid fa-robot"></i>
                </div>
                <div class="flex-1 space-y-3 overflow-hidden ai-content-area"></div>
            `;
            chatContainer.appendChild(aiWrapper);
            return aiWrapper.querySelector('.ai-content-area');
        }

        function addUserMessage(text) {
            const userMsg = document.createElement('div');
            userMsg.className = 'flex justify-end fade-in';
            userMsg.innerHTML = `<div class="user-msg text-sm md:text-base">${text}</div>`;
            chatContainer.appendChild(userMsg);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // --- ê¸°ì¡´ typeText í•¨ìˆ˜ë¥¼ ì´ê±¸ë¡œ êµì²´í•˜ì„¸ìš” ---
        // --- í…ìŠ¤íŠ¸ íƒ€ì´í•‘ íš¨ê³¼ í•¨ìˆ˜ (HTML íƒœê·¸ ê¹¨ì§ ë°©ì§€ ë²„ì „) ---
        function typeText(container, text) {
            return new Promise(resolve => {
                const p = document.createElement('p');
                p.className = 'text-gray-800 leading-relaxed text-sm md:text-base';
                container.appendChild(p);

                // ì»¤ì„œ ìƒì„±
                const cursor = document.createElement('span');
                cursor.className = 'cursor';
                p.appendChild(cursor);

                // 1. Markdownì„ HTMLë¡œ ë³€í™˜
                // **êµµê²Œ** -> Tailwind í´ë˜ìŠ¤ê°€ ì ìš©ëœ strong íƒœê·¸
                // \n -> br íƒœê·¸
                const htmlContent = text
                    .replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold text-black">$1</strong>')
                    .replace(/\n/g, '<br>');

                let i = 0;
                
                // 2. í•œ ê¸€ìì”© íƒ€ì´í•‘ (HTML íƒœê·¸ëŠ” í†µì§¸ë¡œ ì¶”ê°€)
                const interval = setInterval(() => {
                    if (i >= htmlContent.length) {
                        clearInterval(interval);
                        cursor.remove(); // íƒ€ì´í•‘ ëë‚˜ë©´ ì»¤ì„œ ì œê±°
                        resolve();
                        return;
                    }

                    const char = htmlContent[i];

                    // íƒœê·¸ì˜ ì‹œì‘('<')ì„ ë§Œë‚˜ë©´ ë‹«ëŠ” ê´„í˜¸('>')ê¹Œì§€ ì°¾ì•„ì„œ í•œ ë²ˆì— ì¶”ê°€
                    if (char === '<') {
                        const closeIdx = htmlContent.indexOf('>', i);
                        if (closeIdx !== -1) {
                            const tag = htmlContent.substring(i, closeIdx + 1);
                            cursor.insertAdjacentHTML('beforebegin', tag);
                            i = closeIdx + 1; // ì¸ë±ìŠ¤ë¥¼ íƒœê·¸ ë ë‹¤ìŒìœ¼ë¡œ ì´ë™
                        } else {
                            i++; // í˜¹ì‹œ ë‹«ëŠ” íƒœê·¸ê°€ ì—†ìœ¼ë©´ ê·¸ëƒ¥ ì§„í–‰
                        }
                    } else {
                        // ì¼ë°˜ í…ìŠ¤íŠ¸ëŠ” í•œ ê¸€ìì”© ì¶”ê°€
                        cursor.insertAdjacentHTML('beforebegin', char);
                        i++;
                    }

                    // ìŠ¤í¬ë¡¤ì„ í•­ìƒ í•˜ë‹¨ìœ¼ë¡œ ìœ ì§€
                    chatContainer.scrollTop = chatContainer.scrollHeight;

                }, 20); // íƒ€ì´í•‘ ì†ë„ (ìˆ«ìê°€ ì‘ì„ìˆ˜ë¡ ë¹ ë¦„, 15~30 ì¶”ì²œ)
            });
        }

        function wait(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>
